<script>
    function addNotification(module: string, name: string, icon: string, content: string, attatchmentInfo: unknown) {
        var notificationList = localStorage.getItem('notifications') ?? '[]'
        var notificationArray: string[] = JSON.parse(notificationList)

        var notificationPackage = packageNotification(module, name, icon, content, attatchmentInfo)

        localStorage.setItem(`NOTIFICATIONS://${module}|${name}`, JSON.stringify(notificationPackage))

        notificationArray.push(`${module}|${name}`)
        localStorage.setItem('notifications', JSON.stringify(notificationArray))
    }
    window.addNotification = addNotification

    function packageNotification(module: string, name: string, icon: string, content: string, attatchmentInfo: unknown) {
        var res: Record<string, unknown> = {}

        if (module) res.module = module
        if (name) res.name = name
        if (icon) res.icon = icon
        if (content) res.content = content
        if (attatchmentInfo) res.attatchmentInfo = attatchmentInfo

        return res
    }
</script>
